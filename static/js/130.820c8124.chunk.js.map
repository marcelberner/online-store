{"version":3,"file":"static/js/130.820c8124.chunk.js","mappings":"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","sources":["components/Cart/CartItem/CartItem.js","pages/CartPage/CartItems.js"],"sourcesContent":["import { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport useData from \"../../../hooks/useData\";\r\n\r\nimport { changeRequestStatus } from \"../../../store/dataRequest\";\r\nimport { cartRemove, cartDelete, cartAdd } from \"../../../store/userData\";\r\n\r\nimport \"./CartItem.scss\";\r\n\r\nconst CartItem = (props) => {\r\n  const userData = useSelector((state) => state.userData.userData);\r\n  const isAuth = useSelector((state) => state.userAuth.token);\r\n  const dispatch = useDispatch();\r\n\r\n  const { dataRequest } = useData();\r\n\r\n  const increseAmount = async () => {\r\n    if(isAuth){\r\n      const increseAmount = await dataRequest({\r\n        method: \"PATCH\",\r\n        database: `users/${userData.id}/cart/${props.cart.id}`,\r\n        body: {\r\n          productId: props.id,\r\n          amount: props.amount + 1,\r\n          price: props.price,\r\n        },\r\n      });\r\n    }\r\n    else dispatch(cartAdd({\r\n      productId: props.cart.productId,\r\n      amount: props.cart.amount,\r\n      price: props.cart.price,\r\n    }))\r\n\r\n    dispatch(changeRequestStatus());\r\n  };\r\n\r\n  const decreseAmount = async () => {\r\n    if (isAuth) {\r\n      if (props.amount === 1) productCartRemove();\r\n      const decreseAmount = await dataRequest({\r\n        method: \"PATCH\",\r\n        database: `users/${userData.id}/cart/${props.cart.id}`,\r\n        body: {\r\n          productId: props.id,\r\n          amount: props.amount - 1,\r\n          price: props.price,\r\n        },\r\n      });\r\n    } else\r\n      dispatch(\r\n        cartRemove({\r\n          productId: props.cart.productId,\r\n          amount: props.cart.amount,\r\n          price: props.cart.price,\r\n        })\r\n      );\r\n\r\n    dispatch(changeRequestStatus());\r\n  };\r\n\r\n  const productCartRemove = async () => {\r\n    if (isAuth) {\r\n      const removeProduct = await dataRequest({\r\n        method: \"DELETE\",\r\n        database: `users/${userData.id}/cart/${props.cart.id}`,\r\n      });\r\n    } else\r\n      dispatch(\r\n        cartDelete({\r\n          productId: props.cart.productId,\r\n          amount: props.cart.amount,\r\n          price: props.cart.price,\r\n        })\r\n      );\r\n\r\n    dispatch(changeRequestStatus());\r\n  };\r\n\r\n  return (\r\n    <div className={`cart-item ${props.compact ? \"cart-item--compact\" : \"\"}`}>\r\n      <img\r\n        src={props.img}\r\n        alt=\"product img\"\r\n        className={`cart-item__image ${\r\n          props.compact ? \"cart-item__image--compact\" : \"\"\r\n        }`}\r\n      />\r\n      <div className=\"cart-item__name\">\r\n        <span>{props.name}</span>\r\n      </div>\r\n      <div\r\n        className={`cart-item__amount ${\r\n          props.compact ? \"cart-item__amount--hide\" : \"\"\r\n        }`}\r\n      >\r\n        <i\r\n          className=\"fa-solid fa-plus cart-item__icon\"\r\n          onClick={increseAmount}\r\n        ></i>\r\n        <span className=\"cart-item__number\">{props.amount}</span>\r\n        <i\r\n          className=\"fa-solid fa-minus cart-item__icon\"\r\n          onClick={decreseAmount}\r\n        ></i>\r\n      </div>\r\n      <div\r\n        className={`cart-item__remove ${\r\n          props.compact ? \"cart-item__remove--hide\" : \"\"\r\n        }`}\r\n      >\r\n        <i\r\n          className=\"fa-solid fa-trash-can cart-item__icon\"\r\n          onClick={productCartRemove}\r\n        ></i>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartItem;\r\n","import { useState, useEffect, useCallback } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport useData from \"../../hooks/useData\";\r\n\r\nimport { setProducts } from \"../../store/orderData\";\r\n\r\nimport CartItem from \"../../components/Cart/CartItem/CartItem\";\r\n\r\nimport \"./CartItems.scss\";\r\n\r\nconst CartItems = () => {\r\n  const cart = useSelector((state) => state.userData.cart);\r\n  const [cartProducts, setCartProducts] = useState();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { dataRequest } = useData();\r\n\r\n  const getProductData = useCallback(async () => {\r\n    const products = await dataRequest({ method: \"GET\", database: \"products\" });\r\n\r\n    const seekProducts = [];\r\n\r\n    for (let i = 0; i < cart.length; i++) {\r\n      const seekProduct = products.find(\r\n        (product) => product.id === cart[i].productId\r\n      );\r\n      seekProducts.push(seekProduct);\r\n    }\r\n\r\n    dispatch(setProducts(seekProducts))\r\n    setCartProducts(seekProducts);\r\n  }, [cart,dispatch, dataRequest]);\r\n\r\n  useEffect(() => {\r\n    getProductData();\r\n  }, [getProductData]);\r\n\r\n  return (\r\n    <div className=\"cart-items\">\r\n      {cartProducts &&\r\n        cartProducts.map((product, index) => (\r\n          <CartItem\r\n            key={index}\r\n            img={product.img}\r\n            name={product.name}\r\n            amount={cart[index] && cart[index].amount}\r\n            cart={cart[index]}\r\n          />\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartItems;\r\n"],"names":["props","userData","useSelector","state","isAuth","userAuth","token","dispatch","useDispatch","dataRequest","useData","increseAmount","method","database","id","cart","body","productId","amount","price","cartAdd","changeRequestStatus","decreseAmount","productCartRemove","cartRemove","cartDelete","className","compact","src","img","alt","name","onClick","useState","cartProducts","setCartProducts","getProductData","useCallback","products","seekProducts","i","seekProduct","find","product","push","length","setProducts","useEffect","map","index","CartItem"],"sourceRoot":""}
{"version":3,"file":"static/js/198.9afb2a24.chunk.js","mappings":"yPA4FA,EArFe,WACb,IAAMA,GAAQC,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMC,SAASH,SACpD,GAA4BI,EAAAA,EAAAA,YAA5B,eAAOC,EAAP,KAAeC,EAAf,KACA,GAAgCF,EAAAA,EAAAA,YAAhC,eAAOG,EAAP,KAAiBC,EAAjB,KACQC,GAAgBC,EAAAA,EAAAA,KAAhBD,YAEFE,GAAYC,EAAAA,EAAAA,cAAW,iBAAC,0GACJH,EAAY,CAAEI,OAAQ,MAAOC,SAAU,WADnC,cACtBC,EADsB,gBAEDN,EAAY,CACrCI,OAAQ,MACRC,SAAU,aAJgB,OAEtBE,EAFsB,OAOtBC,EAAgBF,EAAUG,QAAO,SAACC,GAAD,OAAWA,EAAMC,SAAWpB,KAEnEM,EAAUW,GAEJI,EAAgB,GAEtBJ,EAAcK,SAAQ,SAACH,GAGrB,IAFA,IAAMI,EAAc,GADW,WAGtBC,GACP,IAAMC,EAAUT,EAAaU,MAC3B,SAACD,GAAD,OAAaA,EAAQE,KAAOR,EAAMZ,SAASiB,GAAGI,aAGhDL,EAAYM,KAAKJ,EAAQK,OALlBN,EAAI,EAAGA,EAAIL,EAAMZ,SAASwB,OAAQP,IAAM,EAAxCA,GAQTH,EAAcQ,KAAKN,MAGrBf,EAAYa,GA3BgB,4CA4B3B,CAACZ,EAAaT,IAMjB,OAJAgC,EAAAA,EAAAA,YAAU,WACRrB,MACC,CAACA,KAGF,oBAASsB,UAAU,SAAnB,UACE,gBAAKA,UAAU,oBAAf,SACG5B,GAAUA,EAAO0B,OAAS,EACzB1B,EAAO6B,KAAI,SAACf,EAAOgB,GAAR,OACT,iBAAKF,UAAU,eAAf,WACE,iBAAKA,UAAU,iBAAf,WACE,iBAAMA,UAAU,gBAAhB,oCACA,0BAAOd,EAAMQ,SAEf,iBAAKM,UAAU,iBAAf,WACE,iBAAMA,UAAU,gBAAhB,sBACA,0BACoB,YAAjBd,EAAMiB,OAAuB,eAAiB,wBAGnD,iBAAKH,UAAU,iBAAf,WACE,iBAAMA,UAAU,gBAAhB,mCACA,gBAAKA,UAAU,mBAAf,SACG1B,GACCA,EAAS4B,GAAOD,KAAI,SAACT,EAASU,GAAV,OAClB,iBAAMF,UAAU,kBAAhB,SACGR,GADoCU,YAM/C,iBAAKF,UAAU,iBAAf,WACE,iBAAMA,UAAU,gBAAhB,+CACA,4BAAOd,EAAMkB,WAAb,kBAEF,iBAAKJ,UAAU,sCAAf,WACE,iBAAMA,UAAU,gBAAhB,qBACA,0BAAOd,EAAMmB,YA5BkBH,OAiCrC,eAAIF,UAAU,iBAAd","sources":["pages/Account/Orders.js"],"sourcesContent":["import { useEffect, useCallback, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport useData from \"../../hooks/useData\";\r\n\r\nimport \"./Orders.scss\";\r\n\r\nconst Orders = () => {\r\n  const token = useSelector((state) => state.userAuth.token);\r\n  const [orders, setOrders] = useState();\r\n  const [products, setProducts] = useState();\r\n  const { dataRequest } = useData();\r\n\r\n  const getOrders = useCallback(async () => {\r\n    const findOrder = await dataRequest({ method: \"GET\", database: \"orders\" });\r\n    const findProducts = await dataRequest({\r\n      method: \"GET\",\r\n      database: \"products\",\r\n    });\r\n\r\n    const correctOrders = findOrder.filter((order) => order.userId === token);\r\n\r\n    setOrders(correctOrders);\r\n\r\n    const orderProducts = [];\r\n\r\n    correctOrders.forEach((order) => {\r\n      const productName = [];\r\n\r\n      for (let i = 0; i < order.products.length; i++) {\r\n        const product = findProducts.find(\r\n          (product) => product.id === order.products[i].productId\r\n        );\r\n\r\n        productName.push(product.name);\r\n      }\r\n\r\n      orderProducts.push(productName);\r\n    });\r\n\r\n    setProducts(orderProducts);\r\n  }, [dataRequest, token]);\r\n\r\n  useEffect(() => {\r\n    getOrders();\r\n  }, [getOrders]);\r\n\r\n  return (\r\n    <section className=\"orders\">\r\n      <div className=\"orders__container\">\r\n        {orders && orders.length > 0 ? (\r\n          orders.map((order, index) => (\r\n            <div className=\"orders__item\" key={index}>\r\n              <div className=\"orders__column\">\r\n                <span className=\"orders__label\">Numer zamówienia: </span>\r\n                <span>{order.id}</span>\r\n              </div>\r\n              <div className=\"orders__column\">\r\n                <span className=\"orders__label\">status:</span>\r\n                <span>\r\n                  {order.status === \"pending\" ? \"W realizacji\" : \"Zakończony\"}\r\n                </span>\r\n              </div>\r\n              <div className=\"orders__column\">\r\n                <span className=\"orders__label\">Zakupione produkty: </span>\r\n                <div className=\"orders__products\">\r\n                  {products &&\r\n                    products[index].map((product, index) => (\r\n                      <span className=\"orders__product\" key={index}>\r\n                        {product}\r\n                      </span>\r\n                    ))}\r\n                </div>\r\n              </div>\r\n              <div className=\"orders__column\">\r\n                <span className=\"orders__label\">Wartość zamówienia:</span>\r\n                <span>{order.totalPrice} zł</span>\r\n              </div>\r\n              <div className=\"orders__column orders__column--last\">\r\n                <span className=\"orders__label\">Data: </span>\r\n                <span>{order.date}</span>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <h3 className=\"orders__allert\">Twoja historia zamówień jest pusta</h3>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n"],"names":["token","useSelector","state","userAuth","useState","orders","setOrders","products","setProducts","dataRequest","useData","getOrders","useCallback","method","database","findOrder","findProducts","correctOrders","filter","order","userId","orderProducts","forEach","productName","i","product","find","id","productId","push","name","length","useEffect","className","map","index","status","totalPrice","date"],"sourceRoot":""}
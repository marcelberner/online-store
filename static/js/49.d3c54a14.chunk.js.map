{"version":3,"file":"static/js/49.d3c54a14.chunk.js","mappings":"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","sources":["components/Button/SubmitButton.js","components/Cart/PromoCode/PromoCode.js","components/Cart/PriceItems/PriceItems.js","pages/CartPage/Cart.js"],"sourcesContent":["import \"./SubmitButton.scss\";\r\n\r\nconst SubmitButton = (props) => {\r\n  return (\r\n    <input\r\n      onClick={props.action}\r\n      className={`submit-button ${\r\n        props.size === \"small\" && \"submit-button--small\"\r\n      } ${\r\n        props.size === \"large\" && \"submit-button--large\"\r\n      } ${\r\n        props.size === \"medium\" && \"submit-button--medium\"\r\n      }`}\r\n      type=\"submit\"\r\n      value={props.text}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SubmitButton;\r\n","import { useState } from \"react\";\r\n\r\nimport SubmitButton from \"../../Button/SubmitButton\";\r\n\r\nimport \"./PromoCode.scss\";\r\n\r\nconst PromoCode = () => {\r\n  const [isHide, setIsHide] = useState(true);\r\n\r\n  const changeHideStateHandler = () => {\r\n    setIsHide(!isHide);\r\n  };\r\n  return (\r\n    <div className=\"promo-code\">\r\n      <div className=\"promo-code__title\" onClick={changeHideStateHandler}>\r\n        <span className=\"promo-code__text\">Wpisz kod promocyjny</span>\r\n        {isHide ? (\r\n          <i className=\"fa-solid fa-angle-down\"></i>\r\n        ) : (\r\n          <i className=\"fa-solid fa-angle-up\"></i>\r\n        )}\r\n      </div>\r\n      {!isHide && (\r\n        <form>\r\n          <div className=\"promo-code__container\">\r\n            <input\r\n              type={\"text\"}\r\n              placeholder={\"Wpisz kod promocyjny\"}\r\n              className={\"promo-code__input\"}\r\n            />\r\n            <SubmitButton size={\"small\"} text={\"Aktywuj\"} />\r\n          </div>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PromoCode;\r\n","import \"./PriceItems.scss\";\r\n\r\nconst PriceItems = (props) => {\r\n  return (\r\n    <div className={`price-items ${props.hide ? \"price-items--hide\" : \"\"}`}>\r\n      {props.cart.map((product, index) => (\r\n        <div className=\"price-items__item\" key={index}>\r\n          <span className=\"price-items__text\">{`${product.amount} x ${product.price} zł`}</span>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PriceItems;\r\n","import { useSelector, useDispatch } from \"react-redux\";\r\nimport { useLocation, Outlet, useNavigate } from \"react-router-dom\";\r\n\r\nimport { setTotalPrice } from \"../../store/orderData\";\r\n\r\nimport useData from \"../../hooks/useData\";\r\n\r\nimport { changeRequestStatus } from \"../../store/dataRequest\";\r\nimport { cartClear } from \"../../store/userData\";\r\n\r\nimport SubmitButton from \"../../components/Button/SubmitButton\";\r\nimport PromoCode from \"../../components/Cart/PromoCode/PromoCode\";\r\nimport PriceItems from \"../../components/Cart/PriceItems/PriceItems\";\r\n\r\nimport \"./Cart.scss\";\r\n\r\nconst Cart = () => {\r\n  const deliveryMethod = useSelector((state) => state.orderData.deliveryMethod);\r\n  const paymentMethod = useSelector((state) => state.orderData.paymentMethod);\r\n  const customerData = useSelector((state) => state.orderData.customerData);\r\n  const totalPrice = useSelector((state) => state.orderData.totalPrice);\r\n  const userData = useSelector((state) => state.userData.userData);\r\n  const token = useSelector((state) => state.userAuth.token);\r\n  const cart = useSelector((state) => state.userData.cart);\r\n\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  const { dataRequest } = useData();\r\n\r\n  const location = useLocation();\r\n\r\n  let cartTotalPrice = 0;\r\n\r\n  for (let i = 0; i < cart.length; i++) {\r\n    cartTotalPrice +=\r\n      parseFloat(cart[i].price.replace(\" \", \"\").replace(\",\", \".\")) *\r\n      cart[i].amount;\r\n  }\r\n\r\n  const sendOrderHandler = async () => {\r\n    const date = new Date();\r\n\r\n    const currentDate = `${date.getFullYear()}-${\r\n      date.getMonth() + 1 < 10\r\n        ? \"0\" + (date.getMonth() + 1)\r\n        : date.getMonth() + 1\r\n    }-${date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate()}`;\r\n\r\n    const sendOrderRequest = await dataRequest({\r\n      method: \"POST\",\r\n      database: \"orders\",\r\n      body: {\r\n        userId: token,\r\n        customerData: customerData,\r\n        deliveryMethod: deliveryMethod,\r\n        paymentMethod: paymentMethod,\r\n        totalPrice: totalPrice,\r\n        status: \"pending\",\r\n        date: currentDate,\r\n        products: cart,\r\n      },\r\n    });\r\n\r\n    if (token) {\r\n      const clearCart = await dataRequest({\r\n        method: \"DELETE\",\r\n        database: `users/${userData.id}/cart`,\r\n      });\r\n    } else {\r\n      dispatch(cartClear());\r\n    }\r\n\r\n    dispatch(changeRequestStatus());\r\n    navigate(\"/konto/historia-zamowien\");\r\n  };\r\n\r\n  const switchPage = () => {\r\n    if (location.pathname === \"/koszyk\") {\r\n      dispatch(setTotalPrice(cartTotalPrice));\r\n      navigate(\"/koszyk/dostawa\");\r\n    } else if (location.pathname === \"/koszyk/dostawa\")\r\n      navigate(\"/koszyk/podsumowanie\");\r\n      else if (location.pathname === \"/koszyk/podsumowanie\") {\r\n        sendOrderHandler();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"cart\">\r\n      <div className=\"cart__container\">\r\n        <div className=\"cart__header\">\r\n          <h1 className=\"cart__title\">{`${\r\n            location.pathname === \"/koszyk\" ? \"Twój koszyk\" : \"\"\r\n          }${location.pathname === \"/koszyk/dostawa\" ? \"Dostawa\" : \"\"}${\r\n            location.pathname === \"/koszyk/podsumowanie\" ? \"Podsumowanie\" : \"\"\r\n          }`}</h1>\r\n        </div>\r\n        <div\r\n          className={`cart__progress ${\r\n            location.pathname === \"/koszyk\" ? \"cart__progress--stage1\" : \"\"\r\n          }${\r\n            location.pathname === \"/koszyk/dostawa\"\r\n              ? \"cart__progress--stage2\"\r\n              : \"\"\r\n          }${\r\n            location.pathname === \"/koszyk/podsumowanie\"\r\n              ? \"cart__progress--stage3\"\r\n              : \"\"\r\n          }`}\r\n        ></div>\r\n        {cart.length > 0 ? (\r\n          <>\r\n            <div className=\"cart__content\">\r\n              <Outlet />\r\n              <div\r\n                className={`cart__sumarry ${\r\n                  location.pathname !== \"/koszyk\"\r\n                    ? \"cart__sumarry--compact\"\r\n                    : \"\"\r\n                }`}\r\n              >\r\n                <div className=\"cart__button\">\r\n                  <SubmitButton\r\n                    size={\"large\"}\r\n                    text={`${\r\n                      location.pathname === \"/koszyk\"\r\n                        ? \"Dostawa i płatność\"\r\n                        : \"\"\r\n                    }${\r\n                      location.pathname === \"/koszyk/dostawa\"\r\n                        ? \"Podsumowanie\"\r\n                        : \"\"\r\n                    }${\r\n                      location.pathname === \"/koszyk/podsumowanie\"\r\n                        ? \"Płacę i zamawiam\"\r\n                        : \"\"\r\n                    }`}\r\n                    action={switchPage}\r\n                  />\r\n                </div>\r\n                <div\r\n                  className={`cart__info ${\r\n                    location.pathname !== \"/koszyk\" ? \"cart__info--hide\" : \"\"\r\n                  }`}\r\n                >\r\n                  <span className=\"cart__text\">Łączna kwota:</span>\r\n                  <span className=\"cart__text\">{`${cartTotalPrice.toFixed(\r\n                    2\r\n                  )} zł`}</span>\r\n                </div>\r\n                <PriceItems\r\n                  cart={cart}\r\n                  hide={location.pathname !== \"/koszyk\" ? true : false}\r\n                />\r\n                <div\r\n                  className={`cart__promo ${\r\n                    location.pathname !== \"/koszyk\" ? \"cart__promo--hide\" : \"\"\r\n                  }`}\r\n                >\r\n                  <PromoCode />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <h3 className=\"cart__allert\">Twój koszyk jest pusty</h3>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n"],"names":["props","onClick","action","className","size","type","value","text","useState","isHide","setIsHide","placeholder","SubmitButton","hide","cart","map","product","index","amount","price","deliveryMethod","useSelector","state","orderData","paymentMethod","customerData","totalPrice","userData","token","userAuth","navigate","useNavigate","dispatch","useDispatch","dataRequest","useData","location","useLocation","cartTotalPrice","i","length","parseFloat","replace","sendOrderHandler","date","Date","currentDate","getFullYear","getMonth","getDate","method","database","body","userId","status","products","id","cartClear","changeRequestStatus","pathname","setTotalPrice","toFixed"],"sourceRoot":""}